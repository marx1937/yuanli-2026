<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åœŸåœ°å…¬å¾Œå°ç®¡ç†</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <style>
        body { padding: 20px; background-color: #f8f9fa; }
        .table img { width: 80px; height: 80px; object-fit: cover; border-radius: 5px; }
    </style>
</head>
<body>
    <div class="container">
        <h3 class="mb-4">ğŸ‘®â€â™‚ï¸ åœŸåœ°å…¬å¾Œå°ç®¡ç†</h3>
        <a href="/" class="btn btn-outline-secondary mb-3">å›é¦–é </a>
        
        <div class="table-responsive">
            <table class="table table-striped table-bordered bg-white">
                <thead class="thead-dark">
                    <tr>
                        <th>ID</th>
                        <th>ç…§ç‰‡</th>
                        <th>åœ°å€</th>
                        <th>ä¸Šå‚³è€…</th>
                        <th>å‚™è¨»</th>
                        <th>æ“ä½œ</th>
                    </tr>
                </thead>
                <tbody id="data-list"></tbody>
            </table>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script>
        $(document).ready(function() {
            loadData();
        });

        function loadData() {
            // æ³¨æ„ï¼šé€™è£¡æ˜¯å‘¼å« /api/admin/all_data
            $.getJSON('/api/admin/all_data', function(data) {
                var html = '';
                data.forEach(function(item) {
                    html += `
                        <tr>
                            <td>${item.id}</td>
                            <td><a href="${item.image_url}" target="_blank"><img src="${item.image_url}"></a></td>
                            <td>${item.area}</td>
                            <td>${item.nickname}</td>
                            <td>${item.note}</td>
                            <td>
                                <button class="btn btn-danger btn-sm" onclick="deleteItem(${item.id})">
                                    ğŸ—‘ï¸ åˆªé™¤
                                </button>
                            </td>
                        </tr>
                    `;
                });
                $('#data-list').html(html);
            });
        }

        function deleteItem(id) {
            if(confirm('ç¢ºå®šè¦åˆªé™¤ ID: ' + id + ' å—ï¼Ÿåˆªé™¤å¾Œç„¡æ³•å¾©åŸå–”ï¼')) {
                $.post('/api/delete', { id: id }, function(response) {
                    if(response.success) {
                        alert('åˆªé™¤æˆåŠŸï¼');
                        loadData(); 
                    } else {
                        alert('åˆªé™¤å¤±æ•—ï¼š' + response.message);
                    }
                });
            }
        }
    </script>
</body>
</html>
